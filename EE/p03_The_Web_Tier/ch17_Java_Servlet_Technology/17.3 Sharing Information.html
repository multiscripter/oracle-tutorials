<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>17.3 Обмен информацией</title>
</head>
<body>
    <h1>17.3 Обмен информацией</h1>
    <p>
        Веб-компоненты, как и&nbsp;большинство объектов, обычно работают с&nbsp;другими объектами
        для&nbsp;выполнения своих задач. Веб-компоненты могут сделать это, выполнив следующее:
    </p>
    <ul>
        <li>
            <p>Использование частных вспомогательных объектов (например, компонентов JavaBeans).</p>
        </li>
        <li>
            <p>Обмен объектами, которые являются атрибутами общедоступной области видимости</p>
        </li>
        <li>
            <p>Использование базы данных.</p>
        </li>
        <li>
            <p>
                Вызов других веб-ресурсов. Механизмы технологии Java Servlet, которые позволяют
                веб-компоненту вызывать другие веб-ресурсы, описаны в&nbsp;разделе
                <a href="#">&laquo;Вызов других веб-ресурсов&raquo;</a>.
            </p>
        </li>
    </ul>
    <h2>17.3.1 Использование объектов области видимости</h2>
    <p>
        Совместные веб-компоненты обмениваются информацией с&nbsp;помощью объектов, которые поддерживаются
        как&nbsp;атрибуты четырех объектов области видимости. Вы&nbsp;получаете доступ к&nbsp;этим атрибутам
        с&nbsp;помощью методов <code>getAttribute</code> и&nbsp;<code>setAttribute</code> класса,
        представляющего область видимости. В&nbsp;таблице 17-2 перечислены объекты области видимости.
    </p>
    <p><i><b>Таблица 17-2. Объекты области видимости</b></i></p>
    <table title="Объекты области видимости" summary="В этой таблице перечислены объекты области для сервлетов и связанных с ними классов и объясняется, откуда из них доступны.">
        <thead>
            <tr>
                <th>Объект области видимости</th>
                <th>Класс</th>
                <th>Доступно из</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <p>Веб-контекст</p>
                </td>
                <td>
                    <p><code>javax.servlet.ServletContext</code></p>
                </td>
                <td>
                    <p>
                        Веб-компоненты в&nbsp;веб-контексте. См.
                        <a href="servlets008.htm#BNAGL">Доступ к веб-контексту</a>.
                    </p>
                </td>
            </tr>
            <tr>
                <td>
                    <p>Сессия</p>
                </td>
                <td>
                    <p><code>javax.servlet.http.HttpSession</code></p>
                </td>
                <td>
                    <p>
                        Веб-компоненты обрабатывают запрос, относящийся к&nbsp;сеансу.
                        См. <a href="servlets009.htm#BNAGM">&laquo;Обслуживание состояния клиента&raquo;</a>.
                    </p>
                </td>
            </tr>
            <tr>
                <td>
                    <p>Запрос</p>
                </td>
                <td>
                    <p>Подтип <code>javax.servlet.ServletRequest</code></p>
                </td>
                <td>
                    <p>Веб-компоненты обрабатывают запрос.</p>
                </td>
            </tr>
            <tr>
                <td>
                    <p>Страница</p>
                </td>
                <td>
                    <p><code>javax.servlet.jsp.JspContext</code></p>
                </td>
                <td>
                    <p>Страница JSP, которая создает объект.</p>
                </td>
            </tr>
        </tbody>
    </table>
    <h2>17.3.2 Управление одновременным доступом к общим ресурсам</h2>
    <p>
        На&nbsp;многопоточном сервере доступ к&nbsp;общим ресурсам возможен одновременно.
        В&nbsp;дополнение к&nbsp;атрибутам объекта области видимости, общие ресурсы включают в&nbsp;себя данные
        в&nbsp;памяти, такие как переменные экземпляра или&nbsp;класса, и&nbsp;внешние объекты, такие как файлы,
        подключения к&nbsp;базе данных и&nbsp;сетевые подключения.
    </p>
    <p>Параллельный доступ может возникать в нескольких ситуациях:</p>
    <ul>
        <li>
            <p>Несколько веб-компонентов обращаются к&nbsp;объектам, хранящимся в&nbsp;веб-контексте.</p>
        </li>
        <li>
            <p>Несколько веб-компонентов обращаются к&nbsp;объектам, хранящимся в&nbsp;сеансе.</p>
        </li>
        <li>
            <p>
                Несколько потоков внутри веб-компонента обращаются к&nbsp;переменным экземпляра экземпляра.
                Веб-контейнер обычно создает поток для обработки каждого запроса. Чтобы гарантировать,
                что экземпляр сервлета обрабатывает только один запрос за&nbsp;раз, сервлет может реализовать
                интерфейс SingleThreadModel. Если сервлет реализует этот интерфейс, ни&nbsp;один
                из&nbsp;двух потоков не&nbsp;будет выполняться одновременно в&nbsp;методе службы сервлета.
                Веб-контейнер может реализовать эту гарантию, синхронизируя доступ к&nbsp;одному экземпляру
                сервлета или поддерживая пул экземпляров веб-компонентов и&nbsp;отправляя каждый новый запрос
                на&nbsp;свободный экземпляр. Этот интерфейс не&nbsp;предотвращает проблемы синхронизации,
                связанные с&nbsp;доступом к&nbsp;общим ресурсам веб-компонентов, таким как переменные
                статического класса или внешние объекты.
            </p>
        </li>
    </ul>
    <p>
        Когда ресурсы могут быть доступны одновременно, их&nbsp;можно использовать непоследовательно.
        Предотвратить это можно контролем доступа с&nbsp;использованием методов синхронизации,
        описанных в&nbsp;уроке Threads
        <a target="_blank" href="http://docs.oracle.com/javase/tutorial/essential/concurrency/">
            http://docs.oracle.com/javase/tutorial/essential/concurrency/
        </a>
    </p>
</body>
</html>